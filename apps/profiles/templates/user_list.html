{% extends "dashboard_base.html" %}
{% block content %}
  <div class="flex justify-between">
    <form method="get" class="mb-4">
      <input type="text"
             name="q"
             value="{{ query }}"
             placeholder="Search username.."
             class="border border-gray-300 px-4 py-2 rounded w-96" />
      <select name="sort" class="border border-gray-300 px-4 py-2 rounded">
        <option value="">Sort by</option>
        <option value="newest" {% if sort == "newest" %}selected{% endif %}>Newest</option>
        <option value="oldest" {% if sort == "oldest" %}selected{% endif %}>Oldest</option>
        <option value="email_asc" {% if sort == "email_asc" %}selected{% endif %}>Email A-Z</option>
        <option value="email_desc" {% if sort == "email_desc" %}selected{% endif %}>Email Z-A</option>
        <option value="name_asc" {% if sort == "name_asc" %}selected{% endif %}>Name A-Z</option>
        <option value="name_desc" {% if sort == "name_desc" %}selected{% endif %}>Name Z-A</option>
      </select>
      <button type="submit"
              class="ml-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 hover:cursor-pointer">
        Search
      </button>
    </form>
  </div>
  <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow">
    <thead>
      <tr>
        <th class="px-6 py-3 border-b border-gray-200 text-left text-xs font-medium text-gray-700 uppercase bg-gray-100">
          Email
        </th>
        <th class="px-6 py-3 border-b border-gray-200 text-left text-xs font-medium text-gray-700 uppercase bg-gray-100">
          Name
        </th>
        <th class="px-6 py-3 border-b border-gray-200 text-left text-xs font-medium text-gray-700 uppercase bg-gray-100">
          Registration Date
        </th>
        <th class="px-6 py-3 border-b border-gray-200 text-left text-xs font-medium text-gray-700 uppercase bg-gray-100">
          Action
        </th>
      </tr>
    </thead>
    <tbody>
      {% for data in profiles %}
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-4 border-b border-gray-200 text-gray-900">{{ data.actor.email }}</td>
          <td class="px-6 py-4 border-b border-gray-200 text-gray-900">{{ data.name }}</td>
          <td class="px-6 py-4 border-b border-gray-200 text-gray-900">{{ data.created_on }}</td>
          <td class="px-6 py-4 border-b border-gray-200">
            <a href="{% url 'user_detail' data.uid %}"
               class="text-blue-600 hover:underline">View Details</a>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="4" class="px-6 py-4 text-center text-gray-500">No users yet.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% include "paginator.html" with page_obj=page_obj request=request %}
{% endblock content %}
